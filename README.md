# Notes-service-go

Сервис, написанный на языке Go, который позволяет пользователям создавать и просматривать свои заметки.

## Основные возможности
- **Регистрация:** реализована регистрация пользователей.
- **Добавление заметок:** пользователи могут создавать новые заметки, которые будут храниться в базе данных.
- **Просмотр заметок:** пользователи могут просматривать свои заметки.
- **Интеграция с Yandex Speller:** перед сохранением заметки, сервис проверяет её текст на наличие орфографических ошибок с помощью Yandex Speller. Если обнаружены ошибки, пользователю предлагается замена.

## Используемые технологии
- Go: Язык программирования, на котором написан сервис.
- Yandex Speller: Сервис для проверки орфографии.
- PostgreSQL: База данных для хранения информации о пользователях и заметках.
- Docker: Используется для контейнеризации сервиса, что облегчает его развертывание и управление зависимостями.

## Эндпоинты

### Пользователи (`/users`)

- **POST /users/register**
    - **Описание:** Регистрация нового пользователя.
    - **Параметры:** JSON-объект с `login` и `password`.
    - **Ответ:** Access-токен возвращается в теле ответа вместе с информацией о пользователе, а Refresh-токен передается в куках.

- **POST /users/login**
    - **Описание:** Авторизация пользователя.
    - **Параметры:** JSON-объект с `login` и `password`.
    - **Ответ:** Access-токен возвращается в теле ответа вместе с информацией о пользователе, а Refresh-токен передается в куках.

- **GET /users/refresh**
    - **Описание:** Обновление Access-токена с использованием Refresh-токена.
    - **Параметры:** Нет.
    - **Ответ:** Новая пара токенов: Access-токен в теле ответа и Refresh-токен в куках.
    - **Требования:** действующий Refresh-токен в Cookie

- **GET /users/logout**
    - **Описание:** Выход из системы, аннулирование текущих токенов.
    - **Параметры:** Нет.
    - **Ответ:** Подтверждение выхода.

### Заметки (`/notes`)

- **GET /notes/**
    - **Описание:** Получение списка всех заметок текущего пользователя.
    - **Параметры:** Нет.
    - **Ответ:** Массив заметок в формате.
    - **Требования:** Access-токен должен быть передан в заголовке авторизации.

- **POST /notes/**
    - **Описание:** Создание новой заметки.
    - **Параметры:** JSON-объект с `name` и `content`.
    - **Ответ:** Созданная заметка.
    - **Требования:** Access-токен должен быть передан в заголовке авторизации.

## Переменные окружения

Пример .env файла:

```
PORT=8888
DB_USER=postgres
DB_PASSWORD=postgres
DB_HOST=postgres
DB_PORT=5432
DB_NAME=postgres
ACCESS_TTL=15m
REFRESH_TTL=168h
ACCESS_SIGNING_KEY=9GQxrrHvROiN57pYYXKswtiX4mvux7uA
REFRESH_SIGNING_KEY=nj66uZpKty1ktFUuzc0DrFnXgdWZQMZU
SPELLER_URL=https://speller.yandex.net/services/spellservice.json/checkText
```

## Требования для запуска

- Docker

## Начало работы

Склонируйте репозиторий, создайте .env файл и из папки notes-service-go запустите:

```docker network create notes_network && docker-compose up -d```

## Postman коллекция

Для удобства проверки работоспособности в папке ```docs``` в корне проекта есть файл для импорта postman коллекции шаблонов запросов.